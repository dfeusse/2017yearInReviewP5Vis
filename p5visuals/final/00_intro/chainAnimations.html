<!DOCTYPE html>
<html>
	<head>
		<title>thunder</title> 
		
		<!-- Import CSS Here -->

      	<!--Let browser know website is optimized for mobile-->
      	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

		<style type="text/css"></style>
	</head>
	<body>
		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/p5.min.js"></script> -->
		<script src="../../../libs/p5/p5.min.js"></script>
		<script src="introAll.js"></script>

		<div id="intro-vis"></div>
<!--
		<script type="text/javascript">
			
		console.log('chainAnimations.js called');

		console.log('circlesAppear.js called')

		var circle01;
		var circle02;
		var circle03;
		var circle04;

		// timer vars
		var appearTimer = 1000;
		var waveTimer = appearTimer + 2000;
		var waveDelay = 5;
		var circleLag = 30;
		var ballDropTimer = 2000;

		function setup() {
			var cnv = createCanvas(400,400);
			cnv.parent("intro-vis")

			var centerWidth = width/2;
			var centerHeight = height/2;
			var evenSpacing = 40;

			var googleBlue = '#4285F4';
			var googleRed = '#EA4335';
			var googleYellow = '#FBBC04';
			var googleGreen = '#34A853';

			circle01 = new GoogleCircle(13 + 0, googleBlue, 1);
			circle02 = new GoogleCircle(13 + evenSpacing, googleRed, 1);
			circle03 = new GoogleCircle(13 + evenSpacing * 2, googleYellow, 1);
			circle04 = new GoogleCircle(13 + evenSpacing * 3, googleGreen, 1);

		}

		function draw() {
			background(255);

			// circles appear
			if (millis() > appearTimer) {
				circle01.appear();
				circle02.appear();
				circle03.appear();
				circle04.appear();
			}

			// waves logo animation
			if (millis() > waveTimer && millis() < 6000) {
				circle01.wave();
			}
			if (millis() > waveTimer + circleLag && millis() < 6000) {
				circle02.wave();
			}
			if (millis() > waveTimer + circleLag * 2 && millis() < 6000) {
				circle03.wave();
			}
			if (millis() > waveTimer + circleLag * 3 && millis() < 6000) {
				circle04.wave();
			}

			// balls drop to the floor animation
			//if (millis() > waveTimer + circleLag * 3 + ballDropTimer) {
			if (millis() > 6000) {
				console.log('balls hsould drop')
				natureElements(circle01, 0.01, 0, 0, 0.1, 0.03);
				circle01.bouncingUpdate();
				circle01.checkEdges();

				natureElements(circle02, 0, 0.02, 0, 0.1, 0.03);
				circle02.bouncingUpdate();
				circle02.checkEdges();

				natureElements(circle03, 0.03, 0, 0, 0.1, 0.03);
				circle03.bouncingUpdate();
				circle03.checkEdges();

				natureElements(circle04, -0.03, 0.01, 0, 0.1, 0.03);
				circle04.bouncingUpdate();
				circle04.checkEdges();
			}

		}

		function GoogleCircle(XX, circleFill, m) {
			this.maxDiameter = 25;
			this.diameter = 0;

			//this.x = XX;
			//this.y = YY;
			//this.y = this.maxDiameter/2 + .5;
			this.position = createVector(XX, this.maxDiameter/2 + .5);
			this.fill = circleFill;
			this.angle = 0;
			this.waveheight = 10;
			this.startingCirclePosition = 20;

			this.mass = m;
			this.velocity = createVector(0, 0);
			this.acceleration = createVector(0, 0);
			
			// balls drop in cool way
			this.applyForce = function(force) {
				var f = p5.Vector.div(force, this.mass);
				this.acceleration.add(f);
			}
			this.bouncingUpdate = function() {
				this.velocity.add(this.acceleration);
				this.position.add(this.velocity);
				this.acceleration.mult(0);
			}
			this.checkEdges = function() {
				if (this.position.x > width) {
					this.position.x = width;
					this.velocity.x *= -1;
				} else if (this.position.x < 0) {
					this.velocity.x *= -1;
					this.position.x = 0;
				}

				if (this.position.y > height) {
					this.velocity.y *= -1;
					//this.position.y = height;
					this.position.y = height - (m * 10 / 2);
				}
			}

			//  wavey animation 
			this.wave = function() {
				this.position.y = this.diameter/2 + (sin(this.angle + this.startingCirclePosition) * this.waveheight/2) + this.waveheight/2;
				
				//ellipse(this.position.x, this.position.y, this.diameter);
				
				this.angle = this.angle + 0.07;
			}

			// circles appear 
			this.appear = function() {
				if (this.diameter <= this.maxDiameter) {
					this.diameter += .4;	
				}
				
				noStroke();
				fill(this.fill);

				ellipse(this.position.x, this.position.y, this.diameter);
			}

			// initially render circles 
			this.display = function() {
				//noStroke();
				//fill(this.fill);
				ellipse(this.position.x, this.position.y, this.diameter);
			}
		} // end of GoogleCircle

		// helper function for bouncing balls to ground
		function natureElements(circle, windX, windY, gravityX, gravityY, C) {
			//var wind = createVector(0.01, 0);
			//var gravity = createVector(0, 0.1 * circle.mass);

			//var c = 0.03;

			var wind = createVector(windX, windY);
			var gravity = createVector(gravityX, gravityY * circle.mass);

			var c = C;

			var friction = circle.velocity.copy();
			friction.mult(-1);
			friction.normalize();
			friction.mult(c);

			circle.applyForce(friction);
			circle.applyForce(wind);
			circle.applyForce(gravity);
		} // end of natureElements()

		</script>
	-->
	</body>
</html>